{% extends 'base.html' %}
{% load static %}
{% block title %}Inicio - AI News Blog{% endblock %}
{% block description %} Blog de noticias y análisis sobre Inteligencia Artificial. Mantente actualizado con las últimas tendencias, herramientas y debates en el mundo de la IA.{% endblock %}
{% block content %} 
<!-- DEUDA TECNICA: Agregar interaccion a las imagenes de los Post-->
    <!-- Trending Area Start -->
    <div class="trending-area fix">
        <div class="container">
            <div class="trending-main">
                <!-- Trending Tittle -->
                <div class="row">
                    <div class="col-lg-12">
                        <div class="trending-tittle">
                            <strong>Tendencias Ahora</strong> 
                            <!-- <p>Rem ipsum dolor sit amet, consectetur adipisicing elit.</p> -->
                            <div class="trending-animated">
                                <ul id="js-news" class="js-hidden">
                                    {% for post in trending_title_posts %}
                                    <li class="news-item"><a href="{% url 'noticias:post_detail' post.id %}">{{post.titulo}}</a></li> <!-- DEUDA TECNICA: Filtrar posts x cant de vists en un rango, ultimo dia, hora, etc. Limitar cant -->
                                    {% endfor %}
                                </ul>
                            </div>
                            
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-8">
                        <!-- Trending Top -->
                        <div class="trending-top mb-30">
                            <div class="trend-top-img">
                                <img src="{{ trending_top_post.imagen.url }}" alt="{{ trending_top_post.titulo }}">
                                <div class="trend-top-cap"> <!--DEUDA TECNICA: Por esta clase, no coinciden el color de las categorias-->
                                    <span>{{trending_top_post.categoria.first.nombre}}</span> <!-- DEUDA TECNICA: Y si tiene mas de una categoria?, criterio de seleccion por fecha_publicacion pobre, add criterio selec editor, visitas, likes, etc-->
                                    <h2><a href="{% url 'noticias:post_detail' trending_top_post.id %}">{{trending_top_post.titulo}}<br> {{trending_top_post.contenido|truncatechars:150|safe}}</a></h2> <!-- POST-MVP: agregar subtitulo para mostrar ambos con un <br> en medio -->
                                </div>
                            </div>
                        </div>
                        <!-- Trending Bottom -->
                        <div class="trending-bottom">
                            <div class="row">
                                {% for post in trending_bottom_posts %}
                                <div class="col-lg-4">
                                <div class="single-bottom mb-35">
                                    <div class="trend-bottom-img mb-30">
                                        <img src="{{post.imagen.url}}" alt="{{post.titulo}}">
                                    </div>
                                    <div class="trend-bottom-cap">
                                        <span class="color{{post.categoria.first.id}}">{{post.categoria.first.nombre}}</span> <!-- DEUDA TECNICA: = q en la linea 35 -->
                                        <h4><a href="{% url 'noticias:post_detail' post.id %}">{{ post.titulo }}</a></h4>
                                    </div>
                                </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    <!-- Riht content -->
                    <div class="col-lg-4">
                        {% for post in right_content_posts %}
                        <div class="trand-right-single d-flex">
                            <div class="trand-right-img">
                                <img src="{{ post.imagen.url }}" alt="{{ post.titulo }}">
                            </div>
                            <div class="trand-right-cap">
                                <span class="color{{post.categoria.first.id}}">{{post.categoria.first.nombre}}</span>
                                <h4><a href="{% url 'noticias:post_detail' post.id %}">{{ post.titulo }}</a></h4>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Trending Area End -->
    <!--   Weekly-News start -->
    <div class="weekly-news-area pt-50">
        <div class="container">
           <div class="weekly-wrapper">
                <!-- section Tittle -->
                <div class="row">
                    <div class="col-lg-12">
                        <div class="section-tittle mb-30">
                            <h3>Tendencias Semanales</h3> <!-- DEUDA TECNICA: Mostrar el titulo y la descripcion de una noticia y actualizar c vez q cambia el carrousel-->
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="weekly-news-active dot-style d-flex dot-style">
                            {% for post in weekly_news_posts%}
                            <div class="weekly-single">
                                <div class="weekly-img"> <!-- DEUDA TECNICA: Fijar weekly-img 360x420 en style.css-->
                                    <img src="{{ post.imagen.url }}" alt="{{ post.titulo }}">
                                </div>
                                <div class="weekly-caption">
                                    <span class="color{{post.categoria.first.id}}">{{post.categoria.first.nombre}}</span>
                                    <h4><a href="{% url 'noticias:post_detail' post.id %}">{{post.titulo}}</a></h4>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
           </div>
        </div>
    </div>           
    <!-- End Weekly-News -->
   <!-- Whats New Start -->
    <section class="whats-news-area pt-50 pb-20">
        <div class="container">
            <div class="row">
            <div class="col-lg-8">
                <div class="row d-flex justify-content-between">
                    <div class="col-lg-3 col-md-3">
                        <div class="section-tittle mb-30">
                            <h3>Novedades</h3>
                        </div>
                    </div>
                    <div class="col-lg-9 col-md-9">
                        <div class="properties__button">
                            <!--Nav Button  -->                                            
                            <nav>                                                                     
                                <div class="nav nav-tabs" id="nav-tab" role="tablist">
                                    <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab" aria-controls="nav-home" aria-selected="true">All</a>
                                    {% for cat in categorias_whats_new %}
                                    <a class="nav-item nav-link" id="nav-{{cat.nombre|slugify}}-tab" data-toggle="tab" href="#nav-{{cat.nombre|slugify}}" role="tab" aria-controls="nav-{{cat.nombre|slugify}}" aria-selected="false">{{cat.nombre}}</a>
                                    {% endfor %}
                                </div>
                            </nav>
                            <!--End Nav Button  -->
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <!-- Nav Card -->
                        <div class="tab-content" id="nav-tabContent">
                            <!-- card one -->
                            <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">           
                                <div class="whats-news-caption">
                                    <div class="row">
                                        {% for post in posts_whats_new %}
                                        <div class="col-lg-6 col-md-6">
                                            <div class="single-what-news mb-100">
                                                <div class="what-img">
                                                    <img src="{{post.imagen.url}}" alt="{{post.titulo}}">
                                                </div>
                                                <div class="what-cap">
                                                    <span class="color{{post.categoria.first.id}}">{{post.categoria.first.nombre}}</span> <!--DEUDA TECNICA: cambiar css para que no dependa del tam de la img (set 360x335)-->
                                                    <h4><a href="{% url 'noticias:post_detail' post.id %}">{{post.titulo}}</a></h4>
                                                    <p>{{ post.autor.username }}  |  {{ post.fecha_publicacion|date:"d M. Y" }}</p> 
                                                </div>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                            <!-- Card two -->
                            {% for item in data %}
                            <div class="tab-pane fade" id="nav-{{item.cat.nombre|slugify}}" role="tabpanel" aria-labelledby="nav-{{item.cat.nombre|slugify}}-tab">
                                <div class="whats-news-caption">
                                    <div class="row">
                                        {% for post in  item.posts %}
                                        <div class="col-lg-6 col-md-6">
                                            <div class="single-what-news mb-100">
                                                <div class="what-img">
                                                    <img src="{{post.imagen.url}}" alt="{{post.titulo}}">
                                                </div>
                                                <div class="what-cap">
                                                    <span class="color{{item.cat.id}}">{{item.cat.nombre}}</span>
                                                    <h4><a href="{% url 'noticias:post_detail' post.id %}">{{post.titulo}}</a></h4>
                                                    <p>{{ post.autor.username }}  |  {{ post.fecha_publicacion|date:"d M. Y" }}</p> 
                                                </div>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    <!-- End Nav Card -->
                    </div>
                </div>
            </div>
            <!--DEUDA TECNICA: VER QUE HAGO CON ESTA SECCION DE REDES Y PUBLICIDAD-->
            <div class="col-lg-4">
                <!-- Section Tittle -->
                <div class="section-tittle mb-40">
                    <h3>Follow Us</h3>
                </div>
                <!-- Flow Socail -->
                <div class="single-follow mb-45">
                    <div class="single-box">
                        <div class="follow-us d-flex align-items-center">
                            <div class="follow-social">
                                <a href="#"><img src="{% static 'assets/img/news/icon-fb.png' %}" alt=""></a>
                            </div>
                            <div class="follow-count">  
                                <span>8,045</span>
                                <p>Fans</p>
                            </div>
                        </div> 
                        <div class="follow-us d-flex align-items-center">
                            <div class="follow-social">
                                <a href="#"><img src="{% static 'assets/img/news/icon-tw.png' %}" alt=""></a>
                            </div>
                            <div class="follow-count">
                                <span>8,045</span>
                                <p>Fans</p>
                            </div>
                        </div>
                            <div class="follow-us d-flex align-items-center">
                            <div class="follow-social">
                                <a href="#"><img src="{% static 'assets/img/news/icon-ins.png' %}" alt=""></a>
                            </div>
                            <div class="follow-count">
                                <span>8,045</span>
                                <p>Fans</p>
                            </div>
                        </div>
                        <div class="follow-us d-flex align-items-center">
                            <div class="follow-social">
                                <a href="#"><img src="{% static 'assets/img/news/icon-yo.png' %}" alt=""></a>
                            </div>
                            <div class="follow-count">
                                <span>8,045</span>
                                <p>Fans</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- New Poster -->
                <div class="news-poster d-none d-lg-block">
                    <img src="{% static 'assets/img/news/news_card.jpg' %}" alt="">
                </div>
            </div>
            <!--DEUDA TECNICA: VER QUE HAGO CON ESTA SECCION DE REDES Y PUBLICIDAD-->
            </div>
        </div>
    </section>
    <!-- Whats New End -->
    <!--   Weekly2-News start -->
    <div class="weekly2-news-area  weekly2-pading gray-bg">
        <div class="container">
            <div class="weekly2-wrapper">
                <!-- section Tittle -->
                <div class="row">
                    <div class="col-lg-12">
                        <div class="section-tittle mb-30">
                            <h3>Mas de esta semana</h3> <!-- DEUDA TECNICA: Ver si quitamos esta sec, como la llamamos, criterio de selec, que pasa si no se publico nada esta semana...-->
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="weekly2-news-active dot-style d-flex dot-style">
                            {% for post in weekly2_news_posts %}
                            <div class="weekly2-single">
                                <div class="weekly2-img">
                                    <img src="{{ post.imagen.url }}" alt="{{post.titulo}}">
                                </div>
                                <div class="weekly2-caption">
                                    <span class="color{{post.categoria.first.id}}">{{post.categoria.first.nombre}}</span>
                                    <p>{{ post.fecha_publicacion|date:"d M. Y" }}</p>
                                    <h4><a href="{% url 'noticias:post_detail' post.id %}">{{post.titulo}}</a></h4>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>           
    <!-- End Weekly-News -->
    
    <!-- Start Youtube -->
    <div class="youtube-area video-padding">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="video-items-active">
                        {% for vid in videos %}
                        <div class="video-items text-center" data-titulo="{{ vid.titulo }}" data-descripcion="{{ vid.descripcion }}" data-categoria="{{ vid.categoria.nombre }}" data-categoria-id="{{ vid.categoria.id }}">
                            <iframe src="{{vid.embed_url}}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="video-info">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="video-caption"> <!-- DEUDA TECNICA: Queda estatico, en el carrousel no puedo saber cual es el siguiente, poco intuitivo -->
                            {% if videos %}
                            <div class="top-caption">
                                <span class="color{{ videos.0.categoria.id }}">{{ videos.0.categoria.nombre }}</span>
                            </div>
                            <div class="bottom-caption">
                                <h2>{{ videos.0.titulo }}</h2>
                                <p>{{ videos.0.descripcion }}</p>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="testmonial-nav text-center">
                            {% for vid in videos %}
                            <div class="single-video">
                                <iframe  src="{{vid.embed_url}}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                <div class="video-intro">
                                    <h4>{{vid.titulo}}</h4>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> 
    <!-- End Start youtube -->
    <!--  Recent Articles start -->
    <div class="recent-articles">
        <div class="container">
           <div class="recent-wrapper">
                <!-- section Tittle -->
                <div class="row">
                    <div class="col-lg-12">
                        <div class="section-tittle mb-30">
                            <h3>Articulos Recientes</h3> <!-- DEUDA TECNICA: Mismo q las sec ant, def criterio-->
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="recent-active dot-style d-flex dot-style">
                            {% for post in recent_articles_posts %}
                            <div class="single-recent mb-100">
                                <div class="what-img">
                                    <img src="{{post.imagen.url}}" alt="{{post.titulo}}">
                                </div>
                                <div class="what-cap">
                                    <span class="color{{post.categoria.first.id}}">{{post.categoria.first.nombre}}</span> <!-- DEUDA TECNICA: limitar el tamaño-->
                                    <h4><a href="{% url 'noticias:post_detail' post.id %}">{{post.titulo}}</a></h4> 
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
           </div>
        </div>
    </div>           
    <!--Recent Articles End -->
    <!--Start pagination -->
    <!-- DEUDA TECNICA: La punta del Iceberg 💀 -->
    <!-- <div class="pagination-area pb-45 text-center">
        <div class="container">
            <div class="row">
                <div class="col-xl-12">
                    <div class="single-wrap d-flex justify-content-center">
                        <nav aria-label="Page navigation example">
                            <ul class="pagination justify-content-start">
                              <li class="page-item"><a class="page-link" href="#"><span class="flaticon-arrow roted"></span></a></li>
                                <li class="page-item active"><a class="page-link" href="#">01</a></li>
                                <li class="page-item"><a class="page-link" href="#">02</a></li>
                                <li class="page-item"><a class="page-link" href="#">03</a></li>
                              <li class="page-item"><a class="page-link" href="#"><span class="flaticon-arrow right-arrow"></span></a></li>
                            </ul>
                          </nav>
                    </div>
                </div>
            </div>
        </div>
    </div> -->
    <!-- End pagination  -->
{% endblock %}